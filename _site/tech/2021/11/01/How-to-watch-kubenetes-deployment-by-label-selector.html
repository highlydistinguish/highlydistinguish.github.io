<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous">

<!--google fonts-->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>How to watch specific kubenetes deployment by labels - Highly Distinguish</title>
<meta name="description" content="How to watch specific kubenetes deployment by labels">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Highly Distinguish">
<meta property="og:title" content="How to watch specific kubenetes deployment by labels">
<meta property="og:url" content="http://localhost:4000/tech/2021/11/01/How-to-watch-kubenetes-deployment-by-label-selector.html">


  <meta property="og:description" content="How to watch specific kubenetes deployment by labels">







  <meta property="article:published_time" content="2021-11-01T00:00:00+11:00">






<link rel="canonical" href="http://localhost:4000/tech/2021/11/01/How-to-watch-kubenetes-deployment-by-label-selector.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": null,
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Highly Distinguish Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>
<link rel="stylesheet" href="/assets/css/blog.css">


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="http://localhost:4000/" itemprop="url"></a>
    </h3>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>
  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="How to watch specific kubenetes deployment by labels">
    <meta itemprop="description" content="How to watch specific kubenetes deployment by labels">
    <meta itemprop="datePublished" content="2021-11-01T00:00:00+11:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="http://localhost:4000/tech/2021/11/01/How-to-watch-kubenetes-deployment-by-label-selector.html" class="u-url" itemprop="url">How to watch specific kubenetes deployment by labels
</a>
          </h1>
          


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <h1 id="how-to-watch-specific-kubenetes-deployment-by-labels">How to watch specific kubenetes deployment by labels</h1>

<h1 id="background">Background</h1>
<p>You can use Kubenetes Java client library to <em>watch</em> any changes in Kubenets, so that you can wire up your hook logic to call business logic upon any changes in K8s. But normally it’s waste of resource and time to wathc <strong>all</strong> changes, so youc an apply a filter on specific resouce change by fitlering on Kube <em>labels</em>. Here is a mini blog to show how to do so.</p>

<h1 id="check-which-lable-to-filter-on">Check which lable to filter on</h1>

<p>Here is screnshot from Kubenetes LENS, I’ll use label <em>run=dummy-service</em> as sample. As highlight in below screenshot.</p>

<p><img src="/assets\images\kube_labels.png" alt="" /></p>

<h1 id="sample-java-logic">Sample Java logic</h1>

<p>If the label of your deployment in Kubenetse is run=dummy-service, you can use following code logic</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Watch</span><span class="o">&lt;</span><span class="nc">V1Deployment</span><span class="o">&gt;</span> <span class="n">watch</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">watch</span> <span class="o">=</span> <span class="nc">Watch</span><span class="o">.</span><span class="na">createWatch</span><span class="o">(</span>
                    <span class="n">client</span><span class="o">,</span>
                    <span class="n">appsApi</span><span class="o">.</span><span class="na">listNamespacedDeploymentCall</span><span class="o">(</span><span class="s">"YOU_NAME_SPACE"</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="s">"run=dummy-service"</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span>
                            <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">null</span><span class="o">),</span>
                    <span class="k">new</span> <span class="nc">TypeToken</span><span class="o">&lt;</span><span class="nc">Watch</span><span class="o">.</span><span class="na">Response</span><span class="o">&lt;</span><span class="nc">V1Deployment</span><span class="o">&gt;&gt;()</span> <span class="o">{</span>
                    <span class="o">}.</span><span class="na">getType</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ApiException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="no">LOGGER</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">"Error occurred in DeploymentWatcher,"</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>            
        <span class="o">}</span>
        <span class="k">assert</span> <span class="n">watch</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="n">watch</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="k">this</span><span class="o">::</span><span class="n">setMetadata</span><span class="o">);</span>
    <span class="o">}</span>
</code></pre></div></div>

<p>So above code will return all Deployments with label “run=dummy-service”</p>

<h1 id="reference">Reference</h1>
<ul>
  <li>https://appdoc.app/artifact/io.kubernetes/client-java-api/0.1/io/kubernetes/client/apis/AppsV1beta1Api.html#listNamespacedDeploymentCall-java.lang.String-java.lang.String-java.lang.String-java.lang.String-java.lang.String-java.lang.Integer-java.lang.Boolean-io.kubernetes.client.ProgressResponseBody.ProgressListener-io.kubernetes.client.ProgressRequestBody.ProgressRequestListener-</li>
</ul>

<p>–End–</p>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-11-01T00:00:00+11:00">November 1, 2021</time></p>

      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=How+to+watch+specific+kubenetes+deployment+by+labels%20http%3A%2F%2Flocalhost%3A4000%2Ftech%2F2021%2F11%2F01%2FHow-to-watch-kubenetes-deployment-by-label-selector.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2Ftech%2F2021%2F11%2F01%2FHow-to-watch-kubenetes-deployment-by-label-selector.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2Ftech%2F2021%2F11%2F01%2FHow-to-watch-kubenetes-deployment-by-label-selector.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/tech/2021/10/11/Could-not-resolve-github-host.html" class="pagination--pager" title="Failed to talk to github.com from corporation network
">Previous</a>
    
    
      <a href="/blogs/tech/en/debug_not_hit_intelliJ" class="pagination--pager" title="Debug of SpringBoot run not working in IntelliJ
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">You May Also Enjoy</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/HighlyDistinguishLogo-stamp.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blogs/tech/en/boostrap_logging_in_springbootapplication" rel="permalink">How logging system Bootstrapped in Spring Boot Application
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">Summary
Following diagram demonstrated the process to bootstrap and use Logback for loggings in Spring Boot applciation.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/HighlyDistinguishLogo-stamp.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blogs/tech/en/sqlserver_driver_not_configured_integrated_authenciation" rel="permalink">SQLServer Error about This driver is not configured for integrated authentication
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">Symptoms
When you are using integrated authentication (Kerberos connection) for MS SqlServer connection, there is one possible error :

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/HighlyDistinguishLogo-stamp.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blogs/tech/en/save_resources_to_files" rel="permalink">How to copy files from resources folder in jar and save to a file
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">Why to extract resources from jar to local disk

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="/assets/images/HighlyDistinguishLogo-stamp.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blogs/tech/en/debug_not_hit_intelliJ" rel="permalink">Debug of SpringBoot run not working in IntelliJ
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">Normal approach to debug maven

</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>
    </div>

    
      <div class="search-content">
      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
